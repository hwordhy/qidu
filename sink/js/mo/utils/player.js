define(["kernel","soundManager","mijits/info"],function(n,e,t){!function(){for(var n=new RegExp("soundmanager2-nodebug-jsmin.js.*"),e=document.getElementsByTagName("script"),t=0,r=e.length;r>t;t++){var o=e[t].getAttribute("src");if(n.test(o))return o.replace(n,"")}}();e.setup({url:"http://img.heiyanimg.com/_res/min/plugins/swf/"}),n.register("actions.player",function(){function r(n){return"undefined"!=typeof i[n]?i[n]:null}var o,i=[];return function(){if(!e.ok())return void t(this,"播放器还没有准备好","error");var s=this,a=s.data("path"),u=r(a);if(u)return void(u==o&&u.togglePause());var p=s.find("i"),f=e.createSound({id:"smplayer-"+100*Math.random(),url:n.IMG_SERVER+a.replace(".amr",".mp3"),onplay:function(){p.addClass("stop")},onfinish:function(){p.removeClass("stop")},onpause:function(){f.stop()},onstop:function(){p.removeClass("stop")}});o&&o.stop(),f.play(),i[a]=f,o=f}})});