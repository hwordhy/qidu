(function(a) {
    a.fn.autoSave = function(b) {
        var c = {
            cbbox: "",
            time: 30
        };
        b = b || {};
        a.extend(c, b);
        return this.each(function() {
            function b() {
                e = window.setInterval(function() {
                    f()
                }, 1E3 * c.time)
            }
            function f() {
                var b = $this.val();
                "" !== b && (a.fn.autoSave.tipShow("\u6b63\u5728\u4fdd\u5b58\u8349\u7a3f..."), setTimeout(function() {
                    a.fn.autoSave.saveClientData("lastsave" + chapterid, b)
                }, 3E3))
            }
            $this = a(this);
            var d = a("#" + c.cbbox),
                e = null;
            "checked" == d.attr("checked") && ($this.addClass("autos"), b());
            d.bind("click", function(c) {
                "checked" != d.attr("checked") || $this.hasClass("autos") ? (a(this).next().html("\u5173\u95ed\u81ea\u52a8\u4fdd\u5b58"), window.clearInterval(e), $this.removeClass("autos")) : (a(this).next().html("\u5f00\u542f\u81ea\u52a8\u4fdd\u5b58"), b(), $this.addClass("autos"));
                c && c.stopPropagation ? c.stopPropagation() : window.event.cancelBubble = !0
            })
        })
    };
    a.fn.autoSave.tipShow = function(b) {
        a("#tipWrap").is(":animated") || (a("span.tipMsg").html(b), a("#tipWrap").css({
            top: "-32px"
        }).show().animate({
            top: 0
        }, 1E3), setTimeout(function() {
            a("#tipWrap").fadeOut(1E3)
        }, 5E3))
    };
    a.fn.autoSave.saveClientData = function(b, c) {
        if (window.localStorage) return window.localStorage.setItem(b, c), a.fn.autoSave.tipShow("\u6587\u6863\u8349\u7a3f\u5df2\u4fdd\u5b58\uff01"), !0;
        a.fn.autoSave.tipShow("\u4fdd\u5b58\u5931\u8d25\uff01\u8bf7\u81ea\u884c\u5c06\u6587\u6863\u4fdd\u5b58\u81f3word\u6216\u8bb0\u4e8b\u672c\uff01");
        a.fn.autoSave.tipShow("\u4fdd\u5b58\u5931\u8d25\uff01\u8bf7\u81ea\u884c\u5c06\u6587\u6863\u4fdd\u5b58\u81f3word\u6216\u8bb0\u4e8b\u672c\uff01");
        return !1
    };
    a.fn.autoSave.getClientData = function(a) {
        return window.localStorage ? window.localStorage.getItem(a) : null
    };
    a.fn.autoSave.removeClientData = function(a) {
        if (window.localStorage) return window.localStorage.removeItem(a);
        if (window.clipboardData) return window.clipboardData.clearData("Text")
    }
})(jQuery);
